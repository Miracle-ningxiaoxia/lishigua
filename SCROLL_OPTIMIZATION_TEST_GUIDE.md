# 滚动转场优化 - 测试指南

## 快速测试步骤

### 1️⃣ 基础转场测试（最重要）

**目标**：验证从成员介绍到首页的平滑过渡

**步骤**：
1. 打开网站，完成气泡动画
2. 进入成员介绍（横向滚动）
3. 慢慢向下滚动，浏览所有成员
4. 继续滚动到最后一个成员（"这就是我们"）
5. 继续向下滚动

**预期结果**：
- ✅ 页面应该自动滚动回顶部
- ✅ 首页视频背景应该从顶部完美显示，无白边或黑边
- ✅ 转场应该平滑流畅，无卡顿
- ✅ 转场期间应该无法滚动（被锁定）

**失败标志**：
- ❌ 首页视频上方或下方有空白
- ❌ 转场时页面跳动
- ❌ 滚动位置不在顶部

---

### 2️⃣ 吸附（Snap）测试

**目标**：验证滚动停止时的自动吸附功能

**步骤**：
1. 进入成员介绍区域
2. 随意滚动到某个成员的中间位置
3. 停止滚动（不要滚动到底）
4. 观察页面是否自动调整

**预期结果**：
- ✅ 页面应该自动"吸附"到最近的成员卡片
- ✅ 吸附动画应该平滑（0.2-0.4秒）
- ✅ 最终每个成员应该居中显示

**失败标志**：
- ❌ 停止滚动后，成员卡片停在奇怪的位置
- ❌ 没有自动调整

---

### 3️⃣ 快速滚动测试

**目标**：验证快速滚动时的性能

**步骤**：
1. 进入成员介绍区域
2. 快速向下滚动鼠标滚轮
3. 直接滚动到底部

**预期结果**：
- ✅ 动画应该保持流畅，无掉帧
- ✅ 吸附功能仍然正常工作
- ✅ 转场到首页应该平滑

**失败标志**：
- ❌ 动画卡顿或跳跃
- ❌ 某些成员被跳过没有显示

---

### 4️⃣ 反向滚动测试

**目标**：验证状态重置逻辑

**步骤**：
1. 滚动到成员介绍的最后
2. 在转场动画**开始后**，立即向上滚动

**预期结果**：
- ✅ 应该能够正常返回成员介绍区域
- ✅ 转场状态应该被重置
- ✅ 成员介绍应该重新正常显示

**失败标志**：
- ❌ 页面被锁定，无法向上滚动
- ❌ 成员介绍显示异常

---

### 5️⃣ 响应式测试

**目标**：验证不同屏幕尺寸下的表现

**步骤**：
1. 打开浏览器开发者工具（F12）
2. 切换到移动设备模式
3. 测试以下尺寸：
   - 📱 iPhone SE (375x667)
   - 📱 iPhone 14 Pro (393x852)
   - 📱 iPad (768x1024)
   - 💻 桌面 (1920x1080)

**预期结果**：
- ✅ 所有尺寸下转场都应该精确
- ✅ 首页视频在所有尺寸下都完美填充
- ✅ 成员卡片在移动端也能正常显示

**失败标志**：
- ❌ 某个尺寸下有白边或布局错乱
- ❌ 移动端滚动不流畅

---

### 6️⃣ 移动端触摸测试（如有真机）

**目标**：验证移动端触摸滚动

**步骤**：
1. 在真实移动设备上打开网站
2. 使用手指滑动浏览成员介绍
3. 快速滑动到底部

**预期结果**：
- ✅ 触摸滚动应该流畅（不应该太"滑"）
- ✅ 吸附功能在触摸设备上也有效
- ✅ 转场到首页应该精确

**失败标志**：
- ❌ 滚动太"滑"或太"粘"
- ❌ 吸附不工作

---

## 调试检查清单

如果遇到问题，检查以下项：

### 浏览器控制台
- [ ] 打开控制台（F12）
- [ ] 查看是否有 JavaScript 错误
- [ ] 查看是否有 GSAP 或 ScrollTrigger 相关警告

### 网络面板
- [ ] 检查 `hero-bg.mp4` 视频是否加载成功
- [ ] 检查所有成员图片是否加载成功

### 性能面板
- [ ] 检查 FPS（帧率）是否保持在 60fps 左右
- [ ] 查看是否有长时间任务（Long Tasks）

### ScrollTrigger 调试
在浏览器控制台运行：
```javascript
ScrollTrigger.getAll()
```
应该看到一个 ScrollTrigger 实例对应成员介绍

---

## 常见问题排查

### Q1: 转场后首页视频上方有黑边

**可能原因**：
- 视频文件尺寸不对
- CSS 未生效

**解决方案**：
```bash
# 检查视频是否存在
ls public/hero-bg.mp4

# 清除缓存重新加载
Ctrl + Shift + R (Windows) 或 Cmd + Shift + R (Mac)
```

### Q2: 滚动时出现卡顿

**可能原因**：
- Lenis 与 ScrollTrigger 未正确同步
- 浏览器性能问题

**解决方案**：
1. 检查 `SmoothScroll.tsx` 中的同步代码
2. 在性能较差的设备上，考虑禁用 Lenis：
   ```typescript
   // 临时测试：禁用 Lenis
   // <SmoothScroll>{children}</SmoothScroll>
   {children}
   ```

### Q3: 吸附功能不工作

**可能原因**：
- snap 配置未生效
- ScrollTrigger 版本过旧

**解决方案**：
```bash
# 检查 GSAP 版本
npm list gsap

# 如果版本低于 3.12，更新
npm update gsap
```

---

## 性能指标

### 目标指标
- **FPS**：≥ 55fps（桌面）/ ≥ 30fps（移动）
- **转场时间**：≤ 1 秒（从最后一个成员到首页）
- **吸附时间**：0.2-0.4 秒
- **首屏加载**：≤ 3 秒

### 测量工具
- Chrome DevTools Performance 面板
- Lighthouse 性能评分
- 实际用户体验测试

---

## 反馈模板

如果发现问题，请记录以下信息：

```
浏览器：Chrome / Firefox / Safari / Edge
版本：
操作系统：Windows / macOS / iOS / Android
屏幕尺寸：
问题描述：
复现步骤：
1. 
2. 
3. 
预期行为：
实际行为：
截图/录屏：
```

---

**测试完成日期**：_________  
**测试人员**：_________  
**测试结果**：✅ 通过 / ❌ 失败  
**备注**：_________
